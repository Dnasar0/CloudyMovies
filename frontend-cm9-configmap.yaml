apiVersion: v1
data:
  tournament.html: "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Tournaments</title>\n</head>\n<body>\n    <h1>Available Tournaments</h1>\n    <div id=\"tournament-list\"></div>\n    <button onclick=\"fetchTournaments()\">Refresh List</button>\n\n    <div id=\"create-tournament\" style=\"display: none;\">\n        <h2>Create Tournament</h2>\n        <input type=\"text\" id=\"tournamentName\" placeholder=\"Tournament Name\">\n        <input type=\"number\" id=\"prize\" placeholder=\"Prize Amount\">\n        <button onclick=\"createTournament()\">Create</button>\n    </div>\n\n    <script>\n        let username = localStorage.getItem(\"loggedInUser\");\n        let accountType = localStorage.getItem(\"accountType\");\n\n        function fetchTournaments() {\n            fetch(\"/getTournaments\")\n                .then(response => response.json())\n                .then(data => {\n                    let list = document.getElementById(\"tournament-list\");\n                    list.innerHTML = \"\";\n                    data.forEach(tournament => {\n                        let item = document.createElement(\"div\");\n                        item.innerHTML = `<strong>${tournament.name}</strong> - Prize: ${tournament.prize} - Created by: ${tournament.creator}\n                            <button onclick=\"joinTournament('${tournament.id}')\">Join</button>`;\n                        list.appendChild(item);\n                    });\n                })\n                .catch(error => console.error(\"Error fetching tournaments:\", error));\n        }\n\n        function joinTournament(tournamentId) {\n            fetch(\"/joinTournament\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({ tournamentId: tournamentId, username: username  })\n            })\n            .then(response => response.text())\n            .then(data => {\n                console.log(\"Joined tournament:\", data);\n                fetchTournaments(); \n            })\n            .catch(error => console.error(\"Error joining tournament:\", error));\n        }\n\n        function createTournament() {\n            let name = document.getElementById(\"tournamentName\").value;\n            let prize = parseInt(document.getElementById(\"prize\").value);\n\n            fetch(\"/createTournament\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({\n                    name: name,\n                    creator: username,\n                    prize: prize,\n                    players: [{ username: username }]\n                })\n            })\n            .then(response => response.text())\n            .then(data => {\n                console.log(\"Tournament created:\", data);\n                fetchTournaments(); \n            })\n            .catch(error => console.error(\"Error creating tournament:\", error));\n        }\n\n        if (accountType === \"Premium\") {\n            document.getElementById(\"create-tournament\").style.display = \"block\";\n        }\n\n        fetchTournaments();\n    </script>\n</body>\n</html>\n"
kind: ConfigMap
metadata:
  annotations:
    use-subpath: "true"
  labels:
    io.kompose.service: frontend
  name: frontend-cm9
